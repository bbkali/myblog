---
title: SQL注入类型总结
date: 2019-04-09 22:13:05
tags:
    - SQL
    - 注入
categories:
    - 笔记总结
---
## 注入类型总结

在不断实践中经常遇到如下注入类型，总结如下：

| 注入类型   | 条件                                      | 关键                                      |
| ---------- | ----------------------------------------- | ----------------------------------------- |
| union注入  | 显示查询结果                              | order by , union select                   |
| 布尔注入   | 只返回False或者True                       | length、ord函数、二分法                   |
| 报错注入   | 返回错误信息                              | updatexml、group_concat等函数             |
| 时间盲注   | 无返回信息判断可执行sleep                 | sleep、if等函数                           |
| 宽字节注入 | 数据库为GBK编码、使用了addslashes函数转义 | %df'可以吃掉单引号                        |
| 堆叠注入   | 执行多条查询语句                          | 使用分号分隔多条查询语句                  |
| Cookie注入 | 在请求头中cookie参数异常                  | 可用 sqlmap -r cook.txt - p 参数          |
| base64注入 | 有base64编码过的参数                      | 将payload进行base64编码,可用tamper        |
| XFF注入    | PHP中有getenv函数获取环境配置             | x-forward-for、http_client_ip等请求头参数 |
| 二次注入   | 用户注册功能等                            | 在注册中插入恶意代码，在登录中执行        |

<!-- more -->

## 绕过方式总结

| 绕过方式     | 绕过技巧                                                     |
| ------------ | ------------------------------------------------------------ |
| 大小写绕过   | 关键字未过滤大小写混写的情况，如UniON SEleCt                 |
| 双写绕过     | 关键字仅做替换的情况，可双写替换成需要的语句。如seleselectct替换为select |
| 编码绕过     | 未对编码过滤，可进行url、ascil等常用的编码payload            |
| 内联注释绕过 | /*!and*/                                                     |

## 备注

1. 善用Sqlmap的Tamper
2. 掌握编程一门编程语言以及可编写简单的Tamper
3. 掌握手工注入技巧
4. 不断积累注入及绕过经验
5. 熟悉多种数据库查询语句